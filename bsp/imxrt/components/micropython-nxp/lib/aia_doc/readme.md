# 文档器
扩展micropython的help()，以在micropython交互式命令行环境(REPL)上显示更丰富的文档。

如，help('?')，会显示文档器的使用方法。

与旧的help()兼容：当找不到词条时，或者help()的参数不是字符串时，则调用原micropython的帮助函数。
## 工作流程概述
文档器由文档，脚本，C代码，PC端工具四部分组成。
+ 文档：所有的文档都是"zzhsh_*.md"的文件，每个文件里可以包含多个词条。"\*"是一个数字，它其实是词条的hash码。每个文件中存放的词条的hash码都和这个 "\*"相等。
+ 脚本：doc_load.py。负责文档器的高层逻辑，并回调C代码查找当前的词条。
+ C代码：doc_mgr.c。其中一部分用于启动脚本并提供词条参数，另一部分被脚本回调以高效地查找词条。
+ PC端工具：
  + pc_make_doc_hash.py： 筛查当前目录及子目录下的所有不以"zzhsh_"开头的".md"文件，遍历其中的所有词条，计算出词条的hash (0-99), 并写入到"zzhsh_{hash}.md"文件中。
## 创作文档
在PC上完成。先把pc_make_doc_hash.py放到某个工作目录下，在这里书写文档输入的.md文件。然后执行pc_make_doc_hash.py，再把生成的"zzhsh_*.md"文件和doc_load.py复制到某SD卡的"/aia_doc"目录下。
## 使用文档
在micropython交互式命令行环境(REPL)中完成。键入help()来调用文档。

在用户输入help内建函数时，C代码解析出待查的词条并启动doc_load.py，后者从C代码中获取词条，计算hash并找到对应的文档文件，分块读入文件内容，回调C代码查找词条。
## 文档的编写语法
+ 可以把编写的文档存储在任意不以"zzhsh_"开头的md文件中，文件可位于pc_make_doc_hash.py所在的目录或子目录。每个md文件可容纳一个或多个词条。
+ 每个词条以顶格写的"#### 词条名"开始。
  + 例如："#### welcome"，表示接下来的内容解释"welcome"词条
+ <lang=三个字符的语言名>，指示接下来的内容以指定的语言显示。
  + 例如：<lang=eng>, <lang=chs>
  + 注意：有个特殊的'dft'，表示在当前语言查找不到时的默认显示语言。必须放在每个词条的最后面。一般用'dft'替代英语'eng'
+ </lang>：表示本语言的词条解释已结束。可以省略。如不使用，下一个控制符号如"<lang=x>, ####"与本词条本语言的内容不能有空行。
+ <link=词条名>：表示此词条是另一个词条的链接。这可以方便地为词条创建别名。例如：
  ```html
  #### ?
  <link=help>
  ```
  表示"?"词条链接到"help"词条上。
  
  **注意：遇到link时会重新寻找文档文件。因此不宜嵌套过深（如10层以上）。**
## 文档系统的使用
在micropython交互式命令行环境(REPL)中输入"help()"回车即会一步步指引用户如何使用。有两类用法：
+ help(key)
	当key是字符串时，如'welcome', 'help', 查找字符串关键字对应的文档词条，如果找到则以当前语言显示；否则显示"str"类的属性和方法
	当key是其它变量时，会显示该变量所属的类的属性和方法
+ help('key', '语言名')
	类似上面，但是第1个参数必须是字符串，指定本次及**后续**显示的语言
	语言名都是3个字符，包括chs(简中), eng(英语)等。


